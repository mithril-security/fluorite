kind: ZarfPackageConfig
metadata:
  name: nginx
  version: 0.1.0
  description: |
    "A Zarf Package that deploys nginx on my cluster!"

components:
  - name: traefik-crd
    required: true
    import:
      path: ../skeleton

  - name: traefik
    required: true
    import:
      path: ../skeleton

  - name: cert-manager
    required: true
    charts:
      - name: cert-manager
        url: https://charts.jetstack.io
        version: v1.18.1
        namespace: cert-manager
        valuesFiles:
          - ./cert-manager-values.yaml
    images:
      - quay.io/jetstack/cert-manager-cainjector:v1.18.1
      - quay.io/jetstack/cert-manager-controller:v1.18.1
      - quay.io/jetstack/cert-manager-startupapicheck:v1.18.1
      - quay.io/jetstack/cert-manager-webhook:v1.18.1

  - name: self-signed-certificate-authority
    required: true
    import:
      path: ../skeleton

  - name: nginx-deployment
    required: true
    manifests:
      - name: nginx-deployment
        namespace: app
        files:
          - nginx-deployment.yaml
          - nginx-ingress.yaml
    images:
      - docker.io/library/nginx:1.29.3
